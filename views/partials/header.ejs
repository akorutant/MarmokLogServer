<header class="bg-white shadow-sm">
    <nav class="container mx-auto px-4 py-3">
        <!-- Десктопное меню -->
        <div class="flex items-center justify-between hidden md:flex">
            <div class="flex items-center space-x-4">
                <a href="/logs" class="flex items-center">
                    <i class="fas fa-terminal text-2xl text-blue-600"></i>
                    <span class="ml-2 text-xl font-bold text-gray-800">MarmokBot Logs</span>
                </a>
                <div class="text-sm bg-gray-100 px-3 py-1 rounded-full">
                    <i class="fas fa-server text-blue-500 mr-1"></i>
                    <span id="currentTime">Loading...</span>
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <input type="search" 
                           id="searchInput" 
                           placeholder="Search logs..." 
                           class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
                
                <button id="themeToggle" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                    <i class="fas fa-moon text-gray-600"></i>
                </button>
            </div>
        </div>
        
        <!-- Мобильное меню -->
        <div class="md:hidden">
            <div class="flex items-center justify-between">
                <a href="/logs" class="flex items-center">
                    <i class="fas fa-terminal text-xl text-blue-600"></i>
                    <span class="ml-2 text-lg font-bold text-gray-800">MarmokBot Logs</span>
                </a>
                
                <div class="flex items-center">
                    <button id="mobile-search-toggle" class="p-2 mr-2">
                        <i class="fas fa-search text-gray-600"></i>
                    </button>
                    <button id="themeToggleMobile" class="p-2 rounded-lg">
                        <i class="fas fa-moon text-gray-600"></i>
                    </button>
                </div>
            </div>
            
            <!-- Мобильная строка поиска (изначально скрыта) -->
            <div id="mobile-search" class="mt-2 hidden">
                <div class="relative w-full">
                    <input type="search" 
                           id="searchInputMobile" 
                           placeholder="Search logs..." 
                           class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
            </div>
        </div>
    </nav>
    <script>
        function updateTime() {
            const now = new Date();
            const options = { 
                weekday: 'short',
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            
            const mobileOptions = {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            
            const timeElement = document.getElementById('currentTime');
            if (timeElement) {
                // Используем более короткий формат для мобильных устройств
                if (window.innerWidth < 768) {
                    timeElement.textContent = now.toLocaleDateString('en-US', mobileOptions);
                } else {
                    timeElement.textContent = now.toLocaleDateString('en-US', options);
                }
            }
        }
        
        // Инициализация времени
        updateTime();
        setInterval(updateTime, 1000);
        
        // Обработчик для мобильного поиска
        document.addEventListener('DOMContentLoaded', function() {
            const mobileSearchToggle = document.getElementById('mobile-search-toggle');
            const mobileSearch = document.getElementById('mobile-search');
            const themeToggleMobile = document.getElementById('themeToggleMobile');
            
            if (mobileSearchToggle && mobileSearch) {
                mobileSearchToggle.addEventListener('click', function() {
                    mobileSearch.classList.toggle('hidden');
                    
                    // Фокус на поле ввода при открытии
                    if (!mobileSearch.classList.contains('hidden')) {
                        document.getElementById('searchInputMobile').focus();
                    }
                });
            }
            
            // Синхронизируем тему между мобильной и десктопной версиями
            if (themeToggleMobile && themeToggle) {
                themeToggleMobile.addEventListener('click', function() {
                    document.body.classList.toggle('dark-mode');
                    const isDark = document.body.classList.contains('dark-mode');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                    
                    // Обновляем иконки на обоих кнопках
                    updateThemeIcon(isDark);
                    
                    // Обновляем иконку на мобильной кнопке
                    themeToggleMobile.innerHTML = isDark
                        ? '<i class="fas fa-sun text-yellow-500"></i>'
                        : '<i class="fas fa-moon text-gray-600"></i>';
                });
            }
            
            // Синхронизируем поиск между мобильной и десктопной версиями
            const searchInput = document.getElementById('searchInput');
            const searchInputMobile = document.getElementById('searchInputMobile');
            
            if (searchInput && searchInputMobile) {
                searchInput.addEventListener('input', function() {
                    searchInputMobile.value = this.value;
                    filterLogEntries(this.value);
                });
                
                searchInputMobile.addEventListener('input', function() {
                    searchInput.value = this.value;
                    filterLogEntries(this.value);
                });
            }
            
            function filterLogEntries(searchTerm) {
                const logEntries = document.querySelectorAll('.log-entry');
                searchTerm = searchTerm.toLowerCase();
                
                logEntries.forEach(entry => {
                    const text = entry.textContent.toLowerCase();
                    const isMatch = text.includes(searchTerm);
                    entry.style.display = isMatch ? '' : 'none';
                });
            }
        });
    </script>
</header><header class="bg-white shadow-sm">
    <nav class="container mx-auto px-4 py-3">
        <!-- Десктопное меню -->
        <div class="flex items-center justify-between hidden md:flex">
            <div class="flex items-center space-x-4">
                <a href="/logs" class="flex items-center">
                    <i class="fas fa-terminal text-2xl text-blue-600"></i>
                    <span class="ml-2 text-xl font-bold text-gray-800">MarmokBot Logs</span>
                </a>
                <div class="text-sm bg-gray-100 px-3 py-1 rounded-full">
                    <i class="fas fa-server text-blue-500 mr-1"></i>
                    <span id="currentTime">Loading...</span>
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <input type="search" 
                           id="searchInput" 
                           placeholder="Search logs..." 
                           class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
                
                <button id="themeToggle" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                    <i class="fas fa-moon text-gray-600"></i>
                </button>
            </div>
        </div>
        
        <!-- Мобильное меню -->
        <div class="md:hidden">
            <div class="flex items-center justify-between">
                <a href="/logs" class="flex items-center">
                    <i class="fas fa-terminal text-xl text-blue-600"></i>
                    <span class="ml-2 text-lg font-bold text-gray-800">MarmokBot Logs</span>
                </a>
                
                <div class="flex items-center">
                    <button id="mobile-search-toggle" class="p-2 mr-2">
                        <i class="fas fa-search text-gray-600"></i>
                    </button>
                    <button id="themeToggleMobile" class="p-2 rounded-lg">
                        <i class="fas fa-moon text-gray-600"></i>
                    </button>
                </div>
            </div>
            
            <!-- Мобильная строка поиска (изначально скрыта) -->
            <div id="mobile-search" class="mt-2 hidden">
                <div class="relative w-full">
                    <input type="search" 
                           id="searchInputMobile" 
                           placeholder="Search logs..." 
                           class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
            </div>
        </div>
    </nav>
    <script>
        function updateTime() {
            const now = new Date();
            const options = { 
                weekday: 'short',
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            
            const mobileOptions = {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            
            const timeElement = document.getElementById('currentTime');
            if (timeElement) {
                // Используем более короткий формат для мобильных устройств
                if (window.innerWidth < 768) {
                    timeElement.textContent = now.toLocaleDateString('en-US', mobileOptions);
                } else {
                    timeElement.textContent = now.toLocaleDateString('en-US', options);
                }
            }
        }
        
        // Инициализация времени
        updateTime();
        setInterval(updateTime, 1000);
        
        // Обработчик для мобильного поиска
        document.addEventListener('DOMContentLoaded', function() {
            const mobileSearchToggle = document.getElementById('mobile-search-toggle');
            const mobileSearch = document.getElementById('mobile-search');
            const themeToggleMobile = document.getElementById('themeToggleMobile');
            
            if (mobileSearchToggle && mobileSearch) {
                mobileSearchToggle.addEventListener('click', function() {
                    mobileSearch.classList.toggle('hidden');
                    
                    // Фокус на поле ввода при открытии
                    if (!mobileSearch.classList.contains('hidden')) {
                        document.getElementById('searchInputMobile').focus();
                    }
                });
            }
            
            // Синхронизируем тему между мобильной и десктопной версиями
            if (themeToggleMobile && themeToggle) {
                themeToggleMobile.addEventListener('click', function() {
                    document.body.classList.toggle('dark-mode');
                    const isDark = document.body.classList.contains('dark-mode');
                    localStorage.setItem('theme', isDark ? 'dark' : 'light');
                    
                    // Обновляем иконки на обоих кнопках
                    updateThemeIcon(isDark);
                    
                    // Обновляем иконку на мобильной кнопке
                    themeToggleMobile.innerHTML = isDark
                        ? '<i class="fas fa-sun text-yellow-500"></i>'
                        : '<i class="fas fa-moon text-gray-600"></i>';
                });
            }
            
            // Синхронизируем поиск между мобильной и десктопной версиями
            const searchInput = document.getElementById('searchInput');
            const searchInputMobile = document.getElementById('searchInputMobile');
            
            if (searchInput && searchInputMobile) {
                searchInput.addEventListener('input', function() {
                    searchInputMobile.value = this.value;
                    filterLogEntries(this.value);
                });
                
                searchInputMobile.addEventListener('input', function() {
                    searchInput.value = this.value;
                    filterLogEntries(this.value);
                });
            }
            
            function filterLogEntries(searchTerm) {
                const logEntries = document.querySelectorAll('.log-entry');
                searchTerm = searchTerm.toLowerCase();
                
                logEntries.forEach(entry => {
                    const text = entry.textContent.toLowerCase();
                    const isMatch = text.includes(searchTerm);
                    entry.style.display = isMatch ? '' : 'none';
                });
            }
        });
    </script>
</header>